(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9435:function(t,e,a){Promise.resolve().then(a.bind(a,6117))},9376:function(t,e,a){"use strict";var r=a(5475);a.o(r,"useRouter")&&a.d(e,{useRouter:function(){return r.useRouter}})},6117:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return n}});var r=a(7437),s=a(2265),i=a(9376),o=a(4362);function n(){let t=(0,i.useRouter)(),{isAuthenticated:e,loading:a}=(0,o.a)();return(0,s.useEffect)(()=>{a||(e?t.push("/dashboard"):t.push("/auth/login"))},[e,a,t]),(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}},4362:function(t,e,a){"use strict";a.d(e,{H:function(){return c},a:function(){return u}});var r=a(7437),s=a(2265),i=a(8223),o=a(4242);let n=(0,s.createContext)(void 0);function c(t){let{children:e}=t,[a,c]=(0,s.useState)(null),[u,l]=(0,s.useState)(!0);(0,s.useEffect)(()=>{d()},[]);let d=async()=>{try{if(localStorage.getItem("accessToken")){let t=await i.E.getMe();c(t.data)}}catch(t){console.error("Auth check failed:",t),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}finally{l(!1)}},g=async(t,e)=>{try{let{accessToken:a,refreshToken:r,user:s}=(await i.E.login(t,e)).data;localStorage.setItem("accessToken",a),localStorage.setItem("refreshToken",r),c(s),o.Am.success("Login successful!")}catch(e){var a,r;let t=(null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Login failed";throw o.Am.error(t),e}},h=async(t,e,a)=>{try{let{accessToken:r,refreshToken:s,user:n}=(await i.E.register(t,e,a)).data;localStorage.setItem("accessToken",r),localStorage.setItem("refreshToken",s),c(n),o.Am.success("Registration successful!")}catch(e){var r,s;let t=(null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message)||"Registration failed";throw o.Am.error(t),e}},p=async()=>{try{await i.E.logout()}catch(t){console.error("Logout error:",t)}finally{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),c(null),o.Am.info("Logged out successfully")}};return(0,r.jsx)(n.Provider,{value:{user:a,loading:u,login:g,register:h,logout:p,isAuthenticated:!!a},children:e})}function u(){let t=(0,s.useContext)(n);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},8223:function(t,e,a){"use strict";a.d(e,{E:function(){return i}});var r=a(3464);class s{async login(t,e){return(await this.api.post("/api/auth/login",{email:t,password:e})).data}async register(t,e,a){return(await this.api.post("/api/auth/register",{email:t,username:e,password:a})).data}async logout(){return(await this.api.post("/api/auth/logout")).data}async getMe(){return(await this.api.get("/api/auth/me")).data}async getOpportunities(t){return(await this.api.get("/api/arbitrage/opportunities",{params:t})).data}async getOpportunityById(t){return(await this.api.get("/api/arbitrage/opportunities/".concat(t))).data}async getSummary(){return(await this.api.get("/api/arbitrage/summary")).data}async getStatistics(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"day";return(await this.api.get("/api/arbitrage/statistics",{params:{timeRange:t}})).data}async getUserFilters(){return(await this.api.get("/api/arbitrage/filters")).data}async updateUserFilters(t){return(await this.api.put("/api/arbitrage/filters",t)).data}async getTrades(){return(await this.api.get("/api/trades")).data}async getTradeById(t){return(await this.api.get("/api/trades/".concat(t))).data}async executeTrade(t,e){return(await this.api.post("/api/trades/execute",{opportunityId:t,amount:e})).data}async getTradeStats(){return(await this.api.get("/api/trades/stats")).data}constructor(){this.api=r.Z.create({baseURL:"",headers:{"Content-Type":"application/json"},withCredentials:!1}),this.api.interceptors.request.use(t=>{let e=localStorage.getItem("accessToken");return e&&(t.headers.Authorization="Bearer ".concat(e)),t},t=>Promise.reject(t)),this.api.interceptors.response.use(t=>t,async t=>{var e;if((null===(e=t.response)||void 0===e?void 0:e.status)===401)try{let e=localStorage.getItem("refreshToken");if(e){let{accessToken:a}=(await this.api.post("/api/auth/refresh",{refreshToken:e})).data.data;if(localStorage.setItem("accessToken",a),t.config)return t.config.headers.Authorization="Bearer ".concat(a),this.api.request(t.config)}}catch(t){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/auth/login"}return Promise.reject(t)})}}let i=new s}},function(t){t.O(0,[350,971,117,744],function(){return t(t.s=9435)}),_N_E=t.O()}]);