(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6921:function(e,s,t){Promise.resolve().then(t.bind(t,9263))},9263:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return w}});var r=t(7437),a=t(2265),n=t(4853),l=t(6252),c=t(3804),i=t(2381),d=t(9174),o=t(6474),u=t(525),x=t(9205);let m=(0,x.Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);function f(e){let{onTradeClick:s}=e,{opportunities:t,subscribeToOpportunities:n,connected:x}=(0,l.s)(),[f,h]=(0,a.useState)([]),[p,j]=(0,a.useState)({});return((0,a.useEffect)(()=>{x&&n()},[x,n]),(0,a.useEffect)(()=>{if(t.length>0){let e={};t.forEach(s=>{let t=f.find(e=>e.id===s.id);if(t){let r=parseFloat(t.spreadPercentage),a=parseFloat(s.spreadPercentage);a>r?e[s.id]="green":a<r&&(e[s.id]="red")}}),j(e),setTimeout(()=>j({}),500),h(t)}},[t]),x)?0===f.length?(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No opportunities found. The scanner is running..."})}):(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsxs)(c.iA,{children:[(0,r.jsx)(c.xD,{children:(0,r.jsxs)(c.SC,{children:[(0,r.jsx)(c.ss,{children:"Currency Pair"}),(0,r.jsx)(c.ss,{children:"Buy Exchange"}),(0,r.jsx)(c.ss,{children:"Sell Exchange"}),(0,r.jsx)(c.ss,{children:"Buy Price"}),(0,r.jsx)(c.ss,{children:"Sell Price"}),(0,r.jsx)(c.ss,{children:"Spread %"}),(0,r.jsx)(c.ss,{children:"Est. Profit"}),(0,r.jsx)(c.ss,{children:"Market Type"}),(0,r.jsx)(c.ss,{children:"Actions"})]})}),(0,r.jsx)(c.RM,{children:f.map(e=>{let t=parseFloat(e.spreadPercentage),a="green"===p[e.id]?"flash-green":"red"===p[e.id]?"flash-red":"";return(0,r.jsxs)(c.SC,{className:a,children:[(0,r.jsx)(c.pj,{className:"font-medium",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 text-green-500"}),e.tradingPair.symbol]})}),(0,r.jsx)(c.pj,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.buyExchange.displayName}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,o.formatCurrency)(parseFloat(e.buyPrice),4)})]})}),(0,r.jsx)(c.pj,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.sellExchange.displayName}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,o.formatCurrency)(parseFloat(e.sellPrice),4)})]})}),(0,r.jsx)(c.pj,{children:(0,o.formatCurrency)(parseFloat(e.buyPrice),4)}),(0,r.jsx)(c.pj,{children:(0,o.formatCurrency)(parseFloat(e.sellPrice),4)}),(0,r.jsx)(c.pj,{children:(0,r.jsx)(d.C,{variant:t>0?"success":"destructive",children:(0,o.formatPercentage)(t)})}),(0,r.jsx)(c.pj,{className:"font-medium text-green-500",children:(0,o.formatCurrency)(parseFloat(e.profitAfterFees),2)}),(0,r.jsx)(c.pj,{children:(0,r.jsx)(d.C,{variant:"outline",children:e.marketType})}),(0,r.jsx)(c.pj,{children:(0,r.jsxs)(i.z,{size:"sm",onClick:()=>s(e),className:"gap-2",children:["Trade Now",(0,r.jsx)(m,{className:"h-3 w-3"})]})})]},e.id)})})]})}):(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Connecting to server..."})})}var h=t(8223),p=t(4242);let j=(0,x.Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function g(e){let{opportunity:s,onClose:t}=e,[n,l]=(0,a.useState)("100"),[c,d]=(0,a.useState)(!1);if(!s)return null;let u=async()=>{d(!0);try{await h.E.executeTrade(s.id,parseFloat(n)),p.Am.success("Trade executed successfully!"),t()}catch(t){var e,r;let s=(null===(r=t.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.message)||"Trade execution failed";p.Am.error(s)}finally{d(!1)}},x=parseFloat(s.profitAfterFees)*parseFloat(n)/100;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-card rounded-lg max-w-md w-full p-6 relative",children:[(0,r.jsx)("button",{onClick:t,className:"absolute top-4 right-4 text-muted-foreground hover:text-foreground",children:(0,r.jsx)(j,{className:"h-5 w-5"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Execute Trade"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-muted rounded-lg p-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Trading Pair:"}),(0,r.jsx)("span",{className:"font-medium",children:s.tradingPair.symbol})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Buy Exchange:"}),(0,r.jsx)("span",{className:"font-medium",children:s.buyExchange.displayName})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Sell Exchange:"}),(0,r.jsx)("span",{className:"font-medium",children:s.sellExchange.displayName})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Spread:"}),(0,r.jsx)("span",{className:"font-medium text-green-500",children:(0,o.formatPercentage)(parseFloat(s.spreadPercentage))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"amount",className:"text-sm font-medium",children:"Amount (USDT)"}),(0,r.jsx)("input",{id:"amount",type:"number",value:n,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"100",min:"1"})]}),(0,r.jsxs)("div",{className:"bg-muted rounded-lg p-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Buy Price:"}),(0,r.jsx)("span",{children:(0,o.formatCurrency)(parseFloat(s.buyPrice),4)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Sell Price:"}),(0,r.jsx)("span",{children:(0,o.formatCurrency)(parseFloat(s.sellPrice),4)})]}),(0,r.jsxs)("div",{className:"flex justify-between font-medium",children:[(0,r.jsx)("span",{children:"Estimated Profit:"}),(0,r.jsx)("span",{className:"text-green-500",children:(0,o.formatCurrency)(x,2)})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(i.z,{variant:"outline",onClick:t,className:"flex-1",children:"Cancel"}),(0,r.jsx)(i.z,{onClick:u,disabled:c,className:"flex-1",children:c?"Executing...":"Execute Trade"})]})]})]})})}var b=t(9820),N=t(5252);let y=(0,x.Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),v=(0,x.Z)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function w(){let[e,s]=(0,a.useState)(null),[t,c]=(0,a.useState)(null),{opportunities:i,connected:d}=(0,l.s)();(0,a.useEffect)(()=>{o()},[]);let o=async()=>{try{let e=await h.E.getSummary();c(e.data)}catch(e){console.error("Failed to fetch stats:",e)}},x=i.filter(e=>e.isActive),m=x.length>0?x.reduce((e,s)=>e+parseFloat(s.spreadPercentage),0)/x.length:0;return(0,r.jsx)(n.c,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Real-time arbitrage opportunities across multiple exchanges"})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(b.Zb,{children:[(0,r.jsxs)(b.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(b.ll,{className:"text-sm font-medium",children:"Active Opportunities"}),(0,r.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(b.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:x.length}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Currently profitable"})]})]}),(0,r.jsxs)(b.Zb,{children:[(0,r.jsxs)(b.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(b.ll,{className:"text-sm font-medium",children:"Avg Spread"}),(0,r.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(b.aY,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[m.toFixed(2),"%"]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Across all pairs"})]})]}),(0,r.jsxs)(b.Zb,{children:[(0,r.jsxs)(b.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(b.ll,{className:"text-sm font-medium",children:"Connection Status"}),(0,r.jsx)(y,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(b.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:d?(0,r.jsx)("span",{className:"text-green-500",children:"Live"}):(0,r.jsx)("span",{className:"text-red-500",children:"Offline"})}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"WebSocket connection"})]})]}),(0,r.jsxs)(b.Zb,{children:[(0,r.jsxs)(b.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(b.ll,{className:"text-sm font-medium",children:"Best Spread"}),(0,r.jsx)(v,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(b.aY,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[x.length>0?Math.max(...x.map(e=>parseFloat(e.spreadPercentage))).toFixed(2):"0.00","%"]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Highest opportunity"})]})]})]}),(0,r.jsxs)(b.Zb,{children:[(0,r.jsx)(b.Ol,{children:(0,r.jsx)(b.ll,{children:"Live Opportunities"})}),(0,r.jsx)(b.aY,{children:(0,r.jsx)(f,{onTradeClick:s})})]}),(0,r.jsx)(g,{opportunity:e,onClose:()=>s(null)})]})})}},9174:function(e,s,t){"use strict";t.d(s,{C:function(){return n}});var r=t(7437);t(2265);var a=t(6474);function n(e){let{className:s,variant:t="default",...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600"}[t],s),...n})}},3804:function(e,s,t){"use strict";t.d(s,{RM:function(){return i},SC:function(){return d},iA:function(){return l},pj:function(){return u},ss:function(){return o},xD:function(){return c}});var r=t(7437),a=t(2265),n=t(6474);let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",t),...a})})});l.displayName="Table";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",t),...a})});c.displayName="TableHeader";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",t),...a})});i.displayName="TableBody";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tr",{ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a})});d.displayName="TableRow";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("th",{ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...a})});o.displayName="TableHead";let u=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("td",{ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...a})});u.displayName="TableCell"},6252:function(e,s,t){"use strict";t.d(s,{s:function(){return i},w:function(){return c}});var r=t(7437),a=t(2265),n=t(8680);let l=(0,a.createContext)(void 0);function c(e){let{children:s}=e,[t,c]=(0,a.useState)(null),[i,d]=(0,a.useState)(!1),[o,u]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=localStorage.getItem("accessToken"),s=(0,n.io)("http://localhost:5000",{auth:{token:e||""},transports:["websocket","polling"]});return s.on("connect",()=>{console.log("Socket connected:",s.id),d(!0)}),s.on("disconnect",()=>{console.log("Socket disconnected"),d(!1)}),s.on("opportunities:update",e=>{u(e.data)}),s.on("trade:update",e=>{console.log("Trade update:",e)}),s.on("alert:notification",e=>{console.log("Alert:",e)}),s.on("system:message",e=>{console.log("System message:",e)}),c(s),()=>{s.disconnect()}},[]),(0,r.jsx)(l.Provider,{value:{socket:t,connected:i,opportunities:o,subscribeToOpportunities:()=>{t&&i&&t.emit("subscribe:opportunities",{})},unsubscribeFromOpportunities:()=>{t&&i&&t.emit("unsubscribe:opportunities")}},children:s})}function i(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useSocket must be used within a SocketProvider");return e}}},function(e){e.O(0,[350,514,680,184,971,117,744],function(){return e(e.s=6921)}),_N_E=e.O()}]);